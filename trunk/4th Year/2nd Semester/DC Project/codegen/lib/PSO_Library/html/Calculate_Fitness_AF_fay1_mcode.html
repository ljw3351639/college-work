<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T1U3">AF</span> = Calculate_Fitness_AF_fay(<span class="var type1" id="S3T2U6">p</span>,<span class="var type1" id="S4T1U7">fay</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line">coder.inline(<span class="string">'never'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%calculate Fitness(Array Factor) at specific angle(fay)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%Duplicated Code</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo" id="T1:U4"><span class="var type1" id="S6T1U16">n</span>=<span class="mxinfo" id="T1:U6">24</span></span>;                 <span class="comment">%number of antenna element in the array</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo" id="T1:U7"><span class="var type1" id="S7T1U20">degreestep</span>=<span class="mxinfo" id="T1:U9"><span class="mxinfo" id="T1:U10">360</span>/<span class="mxinfo" id="T1:U11"><span class="var type1" id="S6T1U23">n</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo" id="T1:U13"><span class="var type1" id="S8T1U26">wl</span>=<span class="mxinfo" id="T1:U15">1</span></span>;                 <span class="comment">%wave length</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo" id="T1:U16"><span class="var type1" id="S9T1U30">d</span>=<span class="mxinfo" id="T1:U18">0.5</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo" id="T1:U19"><span class="var type1" id="S10T1U34">beta</span>=<span class="mxinfo" id="T1:U21">(2*pi)/<span class="var type1" id="S8T1U41">wl</span></span></span>;       <span class="comment">%phase shift</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo" id="T1:U23"><span class="var type1" id="S12T1U44">seta</span>=<span class="mxinfo" id="T1:U25">90</span></span>;              <span class="comment">%because we will work only on horizontal level (in 2d)so zaxis will be 90</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line"><span class="mxinfo" id="T1:U26"><span class="var type1" id="S13T1U48">r1</span>=<span class="mxinfo" id="T1:U28">(<span class="var type1" id="S6T1U53">n</span>*<span class="var type1" id="S9T1U54">d</span>*<span class="var type1" id="S8T1U55">wl</span>)/(2*pi)</span></span>;   <span class="comment">%radius of the circle</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo" id="T3:U32"><span class="var type1" id="S14T3U63">I</span>=<span class="mxinfo" id="T3:U34"><span class="var type1" id="S3T2U65">p</span>(<span class="mxinfo" id="T25:U36"><span class="mxinfo" id="T1:U37">1</span>:<span class="mxinfo" id="T1:U38">24</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo" id="T3:U39"><span class="var type1" id="S15T3U71">phase</span>=<span class="mxinfo" id="T3:U41"><span class="var type1" id="S3T2U73">p</span>(<span class="mxinfo" id="T25:U43"><span class="mxinfo" id="T1:U44">25</span>:<span class="mxinfo" id="T1:U45">48</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line"><span class="comment">%Initialize Postion Vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo" id="T3:U46"><span class="var type1" id="S16T3U79">postion</span> = <span class="mxinfo" id="T3:U48">zeros(<span class="mxinfo" id="T1:U49">1</span>,<span class="mxinfo" id="T1:U50"><span class="var type1" id="S6T1U83">n</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line"><span class="comment">%Set Initial Value</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line"><span class="mxinfo" id="T1:U52"><span class="mxinfo" id="T1:U53"><span class="var type1" id="S16T3U87">postion</span>(<span class="mxinfo" id="T1:U55">1</span>)</span>=<span class="mxinfo" id="T1:U56">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"><span class="comment">% from 2 to n</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S18T1U92">i</span>=<span class="mxinfo" id="T1:U58">2</span>:<span class="var type1" id="S6T1U95">n</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line">    <span class="mxinfo" id="T1:U60"><span class="mxinfo" id="T1:U61"><span class="var type1" id="S16T3U99">postion</span>(<span class="var type1" id="S18T1U100">i</span>)</span>=<span class="mxinfo" id="T1:U64"><span class="mxinfo" id="T1:U65"><span class="var type1" id="S16T3U103">postion</span>(<span class="mxinfo" id="T1:U67"><span class="var type1" id="S18T1U105">i</span>-<span class="mxinfo" id="T1:U69">1</span></span>)</span>+<span class="var type1" id="S7T1U107">degreestep</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line"><span class="comment">%end of %Duplicated Code</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line"><span class="mxinfo" id="T8:U71"><span class="var type1" id="S19T8U110">elements</span>=<span class="mxinfo" id="T8:U73"><span class="var type1" id="S14T3U112">I</span>.*<span class="mxinfo" id="T8:U75">exp(<span class="mxinfo" id="T8:U76"><span class="mxinfo" id="T9:U77">1i</span>.*(<span class="mxinfo" id="T3:U78"><span class="mxinfo" id="T3:U79"><span class="mxinfo" id="T1:U80"><span class="mxinfo" id="T1:U81"><span class="var type1" id="S10T1U122">beta</span>.*<span class="var type1" id="S13T1U123">r1</span></span>.*<span class="mxinfo" id="T1:U84">sind(<span class="mxinfo" id="T1:U85"><span class="var type1" id="S12T1U126">seta</span></span>)</span></span>.*<span class="mxinfo" id="T3:U87">cosd(<span class="mxinfo" id="T3:U88"><span class="var type1" id="S4T1U130">fay</span>-<span class="var type1" id="S16T3U131">postion</span></span>)</span></span>-<span class="var type1" id="S15T3U132">phase</span></span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33">33</a></span><span class="line"><span class="mxinfo" id="T9:U92"><span class="var type1" id="S23T9U135">AF1</span>=<span class="mxinfo" id="T9:U94">sum(<span class="var type1" id="S19T8U138">elements</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34">34</a></span><span class="line"><span class="mxinfo" id="T1:U96"><span class="var type1" id="S2T1U141">AF</span>=<span class="mxinfo" id="T1:U98">abs(<span class="var type1" id="S23T9U144">AF1</span>)</span></span>;</span></span>
</pre>
