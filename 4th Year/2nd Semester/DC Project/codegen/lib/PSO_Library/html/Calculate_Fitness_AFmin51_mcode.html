<pre class="code">
<span class="srcline"><span class="lineno"><a href="30,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T1U3">AF</span> = Calculate_Fitness_AFmin(<span class="var type1" id="S3T2U6">p</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="30,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,3" id="srcline3"> 3</a></span><span class="line">coder.inline(<span class="string">'never'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="30,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%Calculate fitness of specific particle</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo" id="T1:U3"><span class="var type1" id="S5T1U15">fay1</span>=<span class="mxinfo" id="T1:U5">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo" id="T1:U6"><span class="var type1" id="S6T1U19">fay2</span>=<span class="mxinfo" id="T1:U8">90</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo" id="T1:U9"><span class="var type1" id="S7T1U23">fay3</span>=<span class="mxinfo" id="T1:U11">180</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo" id="T1:U12"><span class="var type1" id="S8T1U27">fay4</span>=<span class="mxinfo" id="T1:U14">30</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,11" id="srcline11">11</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,12" id="srcline12">12</a></span><span class="line"><span class="comment">%Duplicated Code</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo" id="T1:U15"><span class="var type1" id="S9T1U31">n</span>=<span class="mxinfo" id="T1:U17">24</span></span>;           <span class="comment">%number of antenna element in the array</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,14" id="srcline14">14</a></span><span class="line"><span class="mxinfo" id="T1:U18"><span class="var type1" id="S10T1U35">degreestep</span>=<span class="mxinfo" id="T1:U20"><span class="mxinfo" id="T1:U21">360</span>/<span class="mxinfo" id="T1:U22"><span class="var type1" id="S9T1U38">n</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo" id="T1:U24"><span class="var type1" id="S11T1U41">wl</span>=<span class="mxinfo" id="T1:U26">1</span></span>;           <span class="comment">%wave length</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo" id="T1:U27"><span class="var type1" id="S12T1U45">d</span>=<span class="mxinfo" id="T1:U29">0.5</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo" id="T1:U30"><span class="var type1" id="S13T1U49">beta</span>=<span class="mxinfo" id="T1:U32">(2*pi)/<span class="var type1" id="S11T1U56">wl</span></span></span>;   <span class="comment">%phase shift</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo" id="T1:U34"><span class="var type1" id="S15T1U59">seta</span>=<span class="mxinfo" id="T1:U36">90</span></span>;        <span class="comment">%because we will work only on horizontal level (in 2d)so zaxis will be 90</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo" id="T1:U37"><span class="var type1" id="S16T1U63">r1</span>=<span class="mxinfo" id="T1:U39">(<span class="var type1" id="S9T1U68">n</span>*<span class="var type1" id="S12T1U69">d</span>*<span class="var type1" id="S11T1U70">wl</span>)/(2*pi)</span></span>;   <span class="comment">%radius of the circle</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,20" id="srcline20">20</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo" id="T3:U43"><span class="var type1" id="S17T3U78">I</span>=<span class="mxinfo" id="T3:U45"><span class="var type1" id="S3T2U80">p</span>(<span class="mxinfo" id="T25:U47"><span class="mxinfo" id="T1:U48">1</span>:<span class="mxinfo" id="T1:U49">24</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo" id="T3:U50"><span class="var type1" id="S18T3U86">phase</span>=<span class="mxinfo" id="T3:U52"><span class="var type1" id="S3T2U88">p</span>(<span class="mxinfo" id="T25:U54"><span class="mxinfo" id="T1:U55">25</span>:<span class="mxinfo" id="T1:U56">48</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,23" id="srcline23">23</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,24" id="srcline24">24</a></span><span class="line"><span class="comment">%Initialize Postion Vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,25" id="srcline25">25</a></span><span class="line"><span class="mxinfo" id="T3:U57"><span class="var type1" id="S19T3U94">postion</span> = <span class="mxinfo" id="T3:U59">zeros(<span class="mxinfo" id="T1:U60">1</span>,<span class="mxinfo" id="T1:U61"><span class="var type1" id="S9T1U98">n</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,26" id="srcline26">26</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,27" id="srcline27">27</a></span><span class="line"><span class="comment">%Set Initial Value</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,28" id="srcline28">28</a></span><span class="line"><span class="mxinfo" id="T1:U63"><span class="mxinfo" id="T1:U64"><span class="var type1" id="S19T3U102">postion</span>(<span class="mxinfo" id="T1:U66">1</span>)</span>=<span class="mxinfo" id="T1:U67">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,29" id="srcline29">29</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,30" id="srcline30">30</a></span><span class="line"><span class="comment">% from 2 to n</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,31" id="srcline31">31</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S21T1U107">i</span>=<span class="mxinfo" id="T1:U69">2</span>:<span class="var type1" id="S9T1U110">n</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,32" id="srcline32">32</a></span><span class="line">    <span class="mxinfo" id="T1:U71"><span class="mxinfo" id="T1:U72"><span class="var type1" id="S19T3U114">postion</span>(<span class="var type1" id="S21T1U115">i</span>)</span>=<span class="mxinfo" id="T1:U75"><span class="mxinfo" id="T1:U76"><span class="var type1" id="S19T3U118">postion</span>(<span class="mxinfo" id="T1:U78"><span class="var type1" id="S21T1U120">i</span>-<span class="mxinfo" id="T1:U80">1</span></span>)</span>+<span class="var type1" id="S10T1U122">degreestep</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,33" id="srcline33">33</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,34" id="srcline34">34</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,35" id="srcline35">35</a></span><span class="line"><span class="comment">%end of %Duplicated Code</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,36" id="srcline36">36</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,37" id="srcline37">37</a></span><span class="line"><span class="mxinfo" id="T8:U82"><span class="var type1" id="S22T8U125">elements</span>=<span class="mxinfo" id="T8:U84"><span class="var type1" id="S17T3U127">I</span>.*<span class="mxinfo" id="T8:U86">exp(<span class="mxinfo" id="T8:U87"><span class="mxinfo" id="T9:U88">1i</span>.*(<span class="mxinfo" id="T3:U89"><span class="mxinfo" id="T3:U90"><span class="mxinfo" id="T1:U91"><span class="mxinfo" id="T1:U92"><span class="var type1" id="S13T1U137">beta</span>.*<span class="var type1" id="S16T1U138">r1</span></span>.*<span class="mxinfo" id="T1:U95">sind(<span class="mxinfo" id="T1:U96"><span class="var type1" id="S15T1U141">seta</span></span>)</span></span>.*<span class="mxinfo" id="T3:U98">cosd(<span class="mxinfo" id="T3:U99"><span class="var type1" id="S5T1U145">fay1</span>-<span class="var type1" id="S19T3U146">postion</span></span>)</span></span>-<span class="var type1" id="S18T3U147">phase</span></span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,38" id="srcline38">38</a></span><span class="line"><span class="mxinfo" id="T9:U103"><span class="var type1" id="S26T9U150">AF1</span>=<span class="mxinfo" id="T9:U105">sum(<span class="var type1" id="S22T8U153">elements</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,39" id="srcline39">39</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,40" id="srcline40">40</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,41" id="srcline41">41</a></span><span class="line"><span class="mxinfo" id="T8:U107"><span class="var type1" id="S22T8U156">elements</span>=<span class="mxinfo" id="T8:U109"><span class="var type1" id="S17T3U158">I</span>.*<span class="mxinfo" id="T8:U111">exp(<span class="mxinfo" id="T8:U112"><span class="mxinfo" id="T9:U113">1i</span>.*(<span class="mxinfo" id="T3:U114"><span class="mxinfo" id="T3:U115"><span class="mxinfo" id="T1:U116"><span class="mxinfo" id="T1:U117"><span class="var type1" id="S13T1U168">beta</span>.*<span class="var type1" id="S16T1U169">r1</span></span>.*<span class="mxinfo" id="T1:U120">sind(<span class="mxinfo" id="T1:U121"><span class="var type1" id="S15T1U172">seta</span></span>)</span></span>.*<span class="mxinfo" id="T3:U123">cosd(<span class="mxinfo" id="T3:U124"><span class="var type1" id="S6T1U176">fay2</span>-<span class="var type1" id="S19T3U177">postion</span></span>)</span></span>-<span class="var type1" id="S18T3U178">phase</span></span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,42" id="srcline42">42</a></span><span class="line"><span class="mxinfo" id="T9:U128"><span class="var type1" id="S28T9U181">AF2</span>=<span class="mxinfo" id="T9:U130">sum(<span class="var type1" id="S22T8U184">elements</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,43" id="srcline43">43</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,44" id="srcline44">44</a></span><span class="line"><span class="mxinfo" id="T8:U132"><span class="var type1" id="S22T8U187">elements</span>=<span class="mxinfo" id="T8:U134"><span class="var type1" id="S17T3U189">I</span>.*<span class="mxinfo" id="T8:U136">exp(<span class="mxinfo" id="T8:U137"><span class="mxinfo" id="T9:U138">1i</span>.*(<span class="mxinfo" id="T3:U139"><span class="mxinfo" id="T3:U140"><span class="mxinfo" id="T1:U141"><span class="mxinfo" id="T1:U142"><span class="var type1" id="S13T1U199">beta</span>.*<span class="var type1" id="S16T1U200">r1</span></span>.*<span class="mxinfo" id="T1:U145">sind(<span class="mxinfo" id="T1:U146"><span class="var type1" id="S15T1U203">seta</span></span>)</span></span>.*<span class="mxinfo" id="T3:U148">cosd(<span class="mxinfo" id="T3:U149"><span class="var type1" id="S7T1U207">fay3</span>-<span class="var type1" id="S19T3U208">postion</span></span>)</span></span>-<span class="var type1" id="S18T3U209">phase</span></span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,45" id="srcline45">45</a></span><span class="line"><span class="mxinfo" id="T9:U153"><span class="var type1" id="S29T9U212">AF3</span>=<span class="mxinfo" id="T9:U155">sum(<span class="var type1" id="S22T8U215">elements</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,46" id="srcline46">46</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,47" id="srcline47">47</a></span><span class="line"><span class="mxinfo" id="T8:U157"><span class="var type1" id="S22T8U218">elements</span>=<span class="mxinfo" id="T8:U159"><span class="var type1" id="S17T3U220">I</span>.*<span class="mxinfo" id="T8:U161">exp(<span class="mxinfo" id="T8:U162"><span class="mxinfo" id="T9:U163">1i</span>.*(<span class="mxinfo" id="T3:U164"><span class="mxinfo" id="T3:U165"><span class="mxinfo" id="T1:U166"><span class="mxinfo" id="T1:U167"><span class="var type1" id="S13T1U230">beta</span>.*<span class="var type1" id="S16T1U231">r1</span></span>.*<span class="mxinfo" id="T1:U170">sind(<span class="mxinfo" id="T1:U171"><span class="var type1" id="S15T1U234">seta</span></span>)</span></span>.*<span class="mxinfo" id="T3:U173">cosd(<span class="mxinfo" id="T3:U174"><span class="var type1" id="S8T1U238">fay4</span>-<span class="var type1" id="S19T3U239">postion</span></span>)</span></span>-<span class="var type1" id="S18T3U240">phase</span></span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,48" id="srcline48">48</a></span><span class="line"><span class="mxinfo" id="T9:U178"><span class="var type1" id="S30T9U243">AF4</span>=<span class="mxinfo" id="T9:U180">sum(<span class="var type1" id="S22T8U246">elements</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,49" id="srcline49">49</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,50" id="srcline50">50</a></span><span class="line"><span class="mxinfo" id="T1:U182"><span class="var type1" id="S2T1U249">AF</span>=<span class="mxinfo" id="T1:U184">-1*(<span class="mxinfo" id="T1:U185"><span class="mxinfo" id="T1:U186"><span class="mxinfo" id="T1:U187"><span class="mxinfo" id="T1:U188">abs(<span class="var type1" id="S26T9U259">AF1</span>)</span>+<span class="mxinfo" id="T1:U190">abs(<span class="var type1" id="S28T9U262">AF2</span>)</span></span>+<span class="mxinfo" id="T1:U192">abs(<span class="var type1" id="S29T9U265">AF3</span>)</span></span>-<span class="mxinfo" id="T1:U194">abs(<span class="var type1" id="S30T9U268">AF4</span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,51" id="srcline51">51</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
